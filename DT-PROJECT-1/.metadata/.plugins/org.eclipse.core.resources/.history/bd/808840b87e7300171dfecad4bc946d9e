<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow.xsd">

      <var name="shippingAddress" class="com.Eshop.EshopBackend.Model.ShippingAddress"/>
       <var name="payment" class="com.Eshop.EshopBackend.Model.Payment"/>
        <var name="orders" class="com.Eshop.EshopBackend.Model.Orders"/>
     
     <on-start>
     	  <evaluate expression="orderWebflow.initFlow()" result="flowScope.orders"/>
	</on-start>
	
     
    <view-state id="start" view="Address.jsp" model="shippingAddress">
		 <transition on="event1" to="shippingDetails" />
	</view-state>
	
	<action-state id="shippingDetails">
	<evaluate expression="orderWebflow.addShippingAddress(flowScope.orders,shippingAddress)"></evaluate>
	<transition on="success" to="viewPaymentPage"></transition>
	</action-state>
	
	 <view-state id="viewPaymentPage" view="Payment.jsp" model="payment">
		 <transition on="event2" to="orderconfirm" />
	</view-state>
	
	<action-state id="orderconfirm">
	<evaluate expression="orderWebflow.addPaymentMethod(flowScope.orders,payment)"></evaluate>
	<transition on="success" to="orderconfirmation"></transition>
	</action-state>
	
	 <view-state id="orderconfirmation" view="OrderConfirm.jsp" model="orders">
		 <transition on="event3" to="thanks" />
	</view-state>
	<action-state id="thanks">
	<evaluate expression="orderWebflow.addOrder(flowScope.orders)"></evaluate>
	<transition on="success" to="thankspage"></transition>
	</action-state>
	
	<view-state id="thankspage" view="Thanks.jsp">	
	</view-state> 
	
	
</flow>
